
@{
    ViewBag.Title = "Details";
}

@Scripts.Render("~/bundles/jquery")


<div id="notification">
    <h3>Patient Details</h3>
    <hr>
    <p><b>Patient Id: </b> IOS </p>
    <p id="details-reported-on"><b>Reported On: </b>  </p>
    <p><b>Summary </b><br /> Headache: true <br /> Stomachache: true </p>

    <hr />
    <h3>Diagnosis</h3>
    <form action="/Doctor/Done" method="POST" name="myForm" id="myForm">
        <div class="form-group">
            <select id="Diagnosis">
                <option value="Diabetes">Diabetes</option>
                <option value="Back pain">Back pain</option>
                <option value="Anxiety">Anxiety</option>
                <option value="Obesity">Obesity</option>
                <option value="Respiratory problems">Respiratory problems</option>
                <option value="Pain in joint'">Pain in joint'</option>
                <option value="Depressive disorder">Depressive disorder</option>
                <option value="Bronchitis">Bronchitis</option>
                <option value="Asthma">Asthma</option>
                <option value="Nail fungus">Nail fungus</option>
                <option value="Urinary tract infection">Urinary tract infection</option>
                <option value="Allergic response">Allergic response</option>
            </select>
            <br />
            <input class="btn btn-default" value="Submit" type="submit">

        </div>


    </form>


    <!-- Trigger/Open The Modal -->
    <button id="myBtn" style="margin-bottom: 10px">Get Statistics</button>

    <!-- The Modal -->
    <div id="myModal" class="modal">

        <!-- Modal content -->
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="medical-diagnoses-chart" style="width: 900px; height: 500px;"></div>
        </div>

    </div>

</div>
<p>
    @Html.ActionLink("Back to List", "Index")
</p>


<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script>
    // Get the modal
    var modal = document.getElementById('myModal');

    // Get the button that opens the modal
    var btn = document.getElementById("myBtn");

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // When the user clicks on the button, open the modal
    btn.onclick = function () {
        modal.style.display = "block";
        google.charts.load("current", { packages: ["corechart"] });
        google.charts.setOnLoadCallback(drawChart);
        function drawChart() {

            var data = google.visualization.arrayToDataTable([
                ['Diagnosis', 'Count'],
                ['Diabetes', 21],
                ['Back pain', 40],
                ['Anxiety', 120],
                ['Obesity', 160],
                ['Respiratory problems', 77],
                ['Pain in joint', 56],
                ['Depressive disorder', 136],
                ['Bronchitis', 23],
                ['Asthma', 79],
                ['Nail fungus', 12],
                ['Urinary tract infection', 46],
                ['Allergic response', 25]
            ]);

            var options = {
                title: 'Medical Diagnoses Statistics',
                pieHole: 0.4,
                sliceVisibilityThreshold: .05, // TH % - below that it will be agregated as 'Other'
                width: '95%',
                height: '95%',
                chartArea: {
                    height: "80%",
                    width: "100%"
                },

            };

            var chart = new google.visualization.PieChart(document.getElementById('medical-diagnoses-chart'));
            chart.draw(data, options);
        }
    }

    // When the user clicks on <span> (x), close the modal
    span.onclick = function () {
        modal.style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function (event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }
</script>
<script>
    var date = new Date();
    var currentDate = date.toLocaleString();
    document.getElementById("details-reported-on").innerHTML = "<b>Reported On: </b>  " + currentDate;
</script>